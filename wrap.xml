<tool id="rpRanker" name="Rank Pathways">
  <description>Calculate the global score based on thermodynamics, FBA, length, and reaction rule scores of heterologous pathway</description>
  <requirements>
    <requirement type="package">rptools</requirement>
  </requirements>
  <stdio>
		<regex match="WARNING" level="warning" />
		<regex match="ERROR" level="error" />
	</stdio>
  <command detect_errors="exit_code"><![CDATA[
      python -m rptools.rpranker
        #for $input in $pathway_collection
          '$input'
        #end for
        --data_outdir ranked_pathways
        --rename
        --top '$adv.top'
  ]]></command>
  <inputs>
    <param name="pathway_collection" type="data_collection" collection_type="list" label="Pathways" />
    <section name="adv" title="Advanced Options" expanded="false">
       <param name="top" type="integer" value="10" label="Number of pathways selected" />
    </section>
  </inputs>
  <outputs>
    <collection name="list_output" type="list" label="${tool.name}">
      <discover_datasets pattern="(?P&lt;designation&gt;.+)\.xml" ext="xml" directory="ranked_pathways" visible="false" />
    </collection>
  </outputs>
  <help><![CDATA[
Rank Pathways
================

After performing FBA, thermodynamic analysis on the heterologous pathways generated by Retropath2.0 this tool normalizes the different values from each heterologous pathway, and performs a weighted sum function using the following attributes:
	  
	  - Length of the heterologous pathways
	  - Flux to the target compound
	  - Thermodynamic feasibility of the heterologous pathway
	  - Sum of the reaction rule scores
	  

Input
-----

Required:


* **-input**\ : (string) Path to either tar.xz input collection of rpSBML files or a single rpSBML file.
* **-input_format**\ : (string) Format of the input
* **-topX**\ : (integer, default=10) Number of best scoring pathways to return
* **-max_rp_steps**\ : (integer) Maximal number of steps as previously ran in RetroPath2.-

Advanced options:


* **-fba_ceil**\ : (float, default=3.0) FBA ceiling
* **-fba_floor**\ : (float, default=0.0) FBA floor
* **-thermo_ceil**\ : (float, default=8901.2) Thermodynamics ceiling
* **-thermo_floor**\ : (float, default=-7570.2) Thermodynamics floor
* **-weight_rp_steps**\ : (float, default=0.0) Number of steps weight
* **-max_rp_steps**\ : (integer, default=15) Maximal number of steps (as run in RetroPath2.0)
* **-weight_rule_score**\ : (float, default=0.0) Reation rule score weight
* **-weight_fba**\ : (float, default=0.699707) FBA weight
* **-weight_thermo**\ : (float, default=0.8334961) Pathway thermodynamics weight
* **-pathway_id**\ : (string, default=rp_pathway) Name of the heterologous pathway
* **-objective_id**\ : (string, default=obj_RP1_sink__restricted_biomass) Name of the heterologous pathway objective function
* **-thermo_id**\ : (string, default=dfG_prime_m) Name of the thermodynamics

Output
------


* **output**\ : (string) Path to the output file

Project Links
---------------------

* `GitHub <https://github.com/Galaxy-SynBioCAD/rpGlobalScore>`_

Version
----------

0.1

Authors
-------


* **Melchior du Lac**

License
-------

`MIT <https://raw.githubusercontent.com/Galaxy-SynBioCAD/rpGlobalScore/local/LICENSE>`_

Acknowledgments
---------------


* Thomas Duigou
* Joan HÃ©risson

]]></help>
</tool>